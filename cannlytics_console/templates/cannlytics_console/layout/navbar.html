<!doctype html>
<!-- Console Navigation -->
<!-- Created 11/27/2020 -->
{% load static %}

<html>
  <!-- sticky-top shadow -->
  <header
    id="console-header"
    class="navbar navbar-expand flex-md-nowrap border-bottom p-0"
  >

    <!-- Logo -->
    <div class="navbar-brand d-flex align-items-center col-md-3 col-lg-2 mr-0 pl-2 px-md-3">
      <div class="dropdown">
        <a
          class="dropdown-toggle d-flex align-items-center text-dark"
          href="#"
          id="navbarLabChoice"
          role="button"
          data-toggle="dropdown"
          aria-expanded="false"
        >
          <img
            src="{{ navbar.default_logo_url }}"
            style="height:30px;"
            class="pr-2"
            id="userPhoto"
          >
          <span
            id="userOrganization"
            class="brand-font fs-5 d-none d-md-flex"
          >
            Cannlytics
          </span>
        </a>
        <ul
          class="dropdown-menu dropdown-menu-left"
          aria-labelledby="navbarLabChoice"
        >
          <!-- TODO: Dynamically render up to 3 of user's organizations -->
          <li>
            <a
              class="dropdown-item"
              href="/settings/organizations"
            >
              Your Organizations
            </a>
          </li>
        </ul>
      </div>
      <a
        class="nav-link navbar-toggle d-flex d-md-none pl-3 py-0"
        href="#"
        id="navbarNotificationMenu"
        role="button"
        type="button"
        data-toggle="collapse"
        data-target="#sidebarMenu"
        aria-controls="sidebarMenu"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span data-feather="menu"></span>
      </a>
    </div>

    <!-- Search -->
    <!-- https://bbbootstrap.com/snippets/bootstrap-5-search-bar-microphone-icon-inside-12725910 -->
    <form id="console-search" class="d-flex flex-grow-1 nav-search-form px-sm-3" role="search">
      <input type="text" class="nav-search-input form-control" placeholder="Search" aria-label="Search" name="q">
      <button class="nav-search-button btn btn-default p-0" type="submit"
        style="transform:translateX(-32px);width:0;"
      >
        <span data-feather="search"></span>
      </button>
    </form>

    <!-- Options -->
    <ul id="console-options" class="navbar-nav">

      <!-- Optional: Notification menu -->
      <!-- TODO: Dynamically render notifications -->
      <!-- https://bbbootstrap.com/snippets/bootstrap-5-list-search-inputs-66815316 -->
      {% comment %} <li class="nav-item dropdown">
        <a
          class="nav-link dropdown-toggle py-0"
          href="#"
          id="navbarNotificationMenu"
          role="button"
          data-toggle="dropdown"
          aria-expanded="false"
        >
          <span data-feather="bell"></span>
        </a>
        <ul
          class="dropdown-menu dropdown-menu-right mx-2 my-0 py-0"
          aria-labelledby="navbarNotificationMenu"
          style="border-bottom:none;"
        >
          <div class="notifications">
            <h2 class="h5 text-dark p-2 mb-0">Notifications</h2>
            <div class="notifications-item">
              <img src="https://firebasestorage.googleapis.com/v0/b/cannlytics.appspot.com/o/public%2Fimages%2Flogos%2Fcannlytics_calyx_green_background_square.png?alt=media&token=095cdaf5-fdb0-4d40-840d-7dc50209bd14">
              <div class="text">
                <p class="lh-1 text-dark mt-1 mb-0"><small>Welcome to the OpenTHC Community</small></p>
                <p class="fs-6"><small>See you in the clubhouse.</small></p>
              </div>
            </div>
            <h2 class="h5 text-center text-dark p-2 mb-0">
              <a class="fs-6 d-block" href="/settings/notifications">View All</a>
            </h2>
          </div>
        </ul>
      </li> {% endcomment %}

      <!-- TODO: e-lab notebook -->
      <!-- Easily log / journal laboratory activities -->
      <li class="nav-item">
        <a
          class="nav-link py-0"
          href="#"
          role="button"
        >
          <!-- TODO: Show default photo if photo doesn't load -->
          <span data-feather="book-open"></span>
        </a>
      </li>

      <!-- User Menu -->
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle py-0" href="#" id="navbarUserMenu" role="button" data-toggle="dropdown" aria-expanded="false">
          <!-- TODO: Show default photo if photo doesn't load -->
          <span data-feather="more-vertical"></span>
          {% comment %} <svg fill="#ccc" width="1.25rem" height="1.25rem" viewBox="0 0 16 16" class="bi bi-person-circle nav-icon" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"/>
            <path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
            <path fill-rule="evenodd" d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
          </svg> {% endcomment %}
          {% comment %} {% if user.photo_url %}
            <img
              src="{{ user.photo_url }}"
              alt="Settings"
              title="Settings"
              width="40"
              height="40"
              class="rounded-circle"
              style="vertical-align:unset;"
            >
          {% else %}
            <svg width="1.75rem" height="1.75rem" viewBox="0 0 16 16" class="bi bi-person-circle nav-icon" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"/>
              <path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
              <path fill-rule="evenodd" d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
            </svg>
          {% endif %} {% endcomment %}
        </a>
        <ul class="dropdown-menu dropdown-menu-right mx-2" aria-labelledby="navbarUserMenu">
          <div class="px-3 py-1"><!-- TODO: Make display name / email standout -->
            <h5 id="userName"></h5>
            <h6 id="userEmail"></h6>
          </div>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="/settings/account">Your account</a></li>
          <li>
            <a class="dropdown-item app-action d-flex justify-content-between" onClick="cannlytics.changeTheme();">
              <span>Change theme</span>
              <span class="light-only" data-feather="sunset"></span>
              <span class="dark-only" data-feather="sunrise"></span>
            </a>
          </li>
          <li><a class="dropdown-item" href="/settings/invite">Invite user</a></li>
          <li><a class="dropdown-item" href="/help/feedback">Send feedback</a></li>
          {% comment %} <li><hr class="dropdown-divider"></li> {% endcomment %}
          <li><button class="dropdown-item" onClick="cannlytics.signOut();">Sign Out</button></li>
        </ul>
      </li>

    </ul>

  </header>

</html>
