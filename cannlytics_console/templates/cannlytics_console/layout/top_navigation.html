<!doctype html>
<!--
  Top Navigation | Cannlytics Console
  Author: Keegan Skeate <keegan@cannlytics.com>
  Created: 11/27/2020
  Updated: 5/5/2021
-->
{% load static icon %}
<html>
  <header
    id="console-header"
    class="navbar navbar-expand flex-md-nowrap justify-content-between border-bottom px-0 py-0"
  >

    <!-- Menu toggle -->
    <a
      class="nav-link navbar-toggle d-flex d-md-none ps-3 py-0"
      href="#"
      id="navbarNotificationMenu"
      role="button"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#sidebarMenu"
      aria-controls="sidebarMenu"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      {% icon "menu" class="text-dark" %}
    </a>

    <!-- Logo -->
    <div class="navbar-brand d-none d-md-flex align-items-center col-md-3 col-lg-2 me-0 ps-2 px-md-3">
      <a href="/">
        <img
          src="{% static 'cannlytics_console/images/logos/cannlytics_logo_with_text_light.png' %}"
          style="height:30px;"
          class="pe-2"
          id="organizationPhoto"
          class="light-only"
        >
        <img
          src="{% static 'cannlytics_console/images/logos/cannlytics_logo_with_text_dark.png' %}"
          style="height:30px;"
          class="pe-2"
          id="organizationPhoto"
          class="dark-only"
        >
      </a>
    </div>

    <!-- Organization Choice -->
    <!-- TODO: Dynamically render up to 3 of user's organizations -->
    <!-- TODO: Show organization if already created -->
    {% if organization %}
      {% include "cannlytics_console/components/menus/organization_menu.html" %}
    {% endif %}

    <!-- Search -->
    <!-- col-12 col-lg-auto me-lg-3 d-flex align-items-center -->
    <!--  -->
    <form
      id="console-search"
      class="d-flex flex-grow-1 nav-search-form"
      role="search"
    >
      <input
        type="text"
        class="nav-search-input form-control py-1 my-1"
        placeholder="Search"
        aria-label="Search"
        name="q"
        spellcheck="false"
      >
      <button
        class="nav-search-button btn btn-default p-0"
        style="transform:translateX(-32px);width:0;"
        type="submit"
      >
        {% icon "search" height="16" width="16" class="text-secondary" %}
      </button>
    </form>

    <!-- Options -->
    <ul id="console-options" class="navbar-nav float-end">      

      <!-- Theme switch -->
      <!-- Optional: Better moon icon -->
      <button
        class="btn px-2"
        onClick="cannlytics.theme.changeTheme();"
      >
        {% icon "sun" class="light-only text-secondary" %}
        {% icon "moon" class="dark-only text-secondary" %}
      </button>

      <!-- Help Menu -->
      {% include "cannlytics_console/components/menus/help_menu.html" with version=version %}

      <!-- User Menu -->
      {% include "cannlytics_console/components/menus/user_menu.html" with user=user %}

    </ul>

  </header>

</html>
